{% extends "base.html" %}

{% block title %}Coach Dashboard - NAV Scoring{% endblock %}

{% block navbar %}
<div class="navbar">
    <div class="navbar-brand">
        <button class="hamburger" id="hamburgerBtn">â˜°</button>
        <img src="/static/images/siu_logo_stacked_full_color_black_text.png" alt="SIU Salukis Logo" class="navbar-logo">
        <h1>Coach Dashboard</h1>
    </div>
    <div class="navbar-links" id="navbarLinks">
        <a href="/profile">Profile</a>
        <a href="/logout">Logout</a>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.card {
    max-width: 900px;
}
.quick-links {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 250px));
    gap: 1rem;
    justify-content: start;
}
.quick-link {
    background: #f5f5f5;
    padding: 1.5rem;
    border-radius: 10px;
    text-align: center;
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
    width: 250px;
}
.quick-link:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}
.quick-link h3 {
    margin: 0 0 0.5rem 0;
    color: #333;
}
.quick-link p {
    color: #666;
    margin: 0;
    font-size: 0.9rem;
}
</style>
{% endblock %}

{% block content %}
<h2>Welcome, Coach</h2>

<h3>Quick Actions</h3>
<div class="quick-links">
    {% if is_admin and pending_count > 0 %}
    <div class="quick-link" onclick="window.location.href='/coach/users?filter=pending'" style="background: #fff3e0; border: 2px solid #ff9800;">
        <h3>â³ Pending Approvals</h3>
        <p>{{ pending_count }} user(s) awaiting approval</p>
    </div>
    {% endif %}
    <div class="quick-link" onclick="window.location.href='/coach/results'">
        <h3>ğŸ“Š View Results</h3>
        <p>Search and filter all flight results</p>
    </div>
    <div class="quick-link" onclick="window.location.href='/coach/users'">
        <h3>ğŸ‘¥ Manage Users</h3>
        <p>Add, edit, or remove team users</p>
    </div>
    <div class="quick-link" onclick="window.location.href='/coach/pairings'">
        <h3>ğŸ”— Manage Pairings</h3>
        <p>Create and break pilot-observer pairings</p>
    </div>
    <div class="quick-link" onclick="window.location.href='/coach/navs'">
        <h3>ğŸ—ºï¸ Manage NAVs</h3>
        <p>Manage airports, routes, checkpoints, and secrets</p>
    </div>
    {% if is_admin %}
    <div class="quick-link" onclick="window.location.href='/coach/config'">
        <h3>âš™ï¸ System Config</h3>
        <p>Adjust scoring rules, backups, and settings (Admin only)</p>
    </div>
    {% endif %}
</div>

{% if recent_results %}
<h3 style="margin-top: 2rem;">Recent Results</h3>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Team</th>
            <th>NAV</th>
            <th>Score</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for result in recent_results %}
        <tr>
            <td>{{ result.scored_at[:10] }}</td>
            <td>{{ result.team_name }}</td>
            <td>{{ result.nav_name }}</td>
            <td><strong>{{ result.overall_score|round(0) }}</strong> pts</td>
            <td>
                <a href="/coach/results/{{ result.id }}">View</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

{% endblock %}
